<!-- https://docs.google.com/forms/d/e/1FAIpQLSfq8T4r9krErmL8NPU1C9ke-Xgh5TYaSJkuCoAXlS4RDbzquw/viewform --!>
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    
    <title>COVID19- PPE Kit Requirement</title>
    <meta name="viewport" content="width=device-width">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--fonts -->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400|Oswald:500&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js" type="text/javascript"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  </head>
  <style>
    
    label{
      font-family: 'Montserrat', sans-serif;
      font-size: 1em;
      font-weight: 600;
    }

    body{
      background: #f8f9fa;
      font-family: 'Montserrat', sans-serif;
      font-size: 30px;
    }

    .btn-lg {
      padding: 0.5em 1em;
      border-radius: 0.3em;
    }

    .btn-danger {
      color: #fff;
      background-color: #dc3545;
      border-color: #dc3545;
    }
    
    .btn {
      display:inline-block;
      float:left;
      width:auto;
      font-weight:400;
      text-align:center;
      vertical-align:middle;

    }

    .checkbox-label {
      font-size:0.75em;
    }
  </style>
  <script>

    // defaults
    var categories = ['Govt Hospital', 'Charitable Trust', 'Pvt Hospital', 'Other'];
    var states = [
      "Jammu", "Kashmir", "Ladakh", "HP", "Uttarakhand", "Punjab", "Haryana", "UP", "Rajasthan", "Delhi", "Bihar", "Jharkhand", "Assam", "Nagaland", "Meghalaya", "Tripura", "Arunachal", "Manipur", "Mizoram", "Sikkim", "Odisha", "West", "MP", "Gujarat", "Maharashtra", "Chattisgarh", "Tamil", "Kerala", "Karnataka", "Telangana", "Andhra", "Andaman", "Lakshadweep", "Puducherry", "Chandigarh", "Goa","Daman"]; 
var fundingOpts = ['No Funding Required', '50% Funding Required', 'Full Funding Required'];
    var supplied_items = ['PPE kit as per WHO standard', 'N95', 'KN95', 'COVID Testing kit', 'Ventilators'];
    var yesno = ["Yes", "No"];
    var checkboxes = ["PPE kit as per WHO standard", "N95", "KN95", "COVID Testing kit", "Ventilators"];

    var SubmitForm = function(data){
      var orgName = encodeURIComponent(data.orgName);
      var pocName = encodeURIComponent(data.pocName);
      var pocNumber = encodeURIComponent(data.pocNumber);
      var designation = encodeURIComponent(data.designation);
      var pocEmail = encodeURIComponent(data.pocEmail);
      var officeaddress = encodeURIComponent(data.officeaddress);
      var supplyaddress = encodeURIComponent(data.supplyaddress);
      var proposal = encodeURIComponent(data.proposal);
      var maxquantity = encodeURIComponent(data.maxquantity);
      var yesNo = encodeURIComponent(data.yesno);
      var data = {
      'entry.1885986903': orgName,
      'entry.367181357': pocName,
      'entry.213100973': pocNumber,
      'entry.213200973': pocEmail,
      'entry.1000444119': designation, 
      'entry.213300973': officeaddress,
      'entry.213400973': supplyaddress,
      'entry.213500973': proposal,
      'entry.213600973': maxquantity,
      };


      var OrgEnt = "entry.1885986903";
      var NameEnt = "entry.367181357";
      var NumEnt = "entry.213100973";
      var EmailEnt = "entry.806756113";
      var DesEnt = "entry.1000444119";
      var OffEnt = "entry.14307066";
      var SupEnt = "entry.494619472";
      var ProEnt = "entry.1602010152";
      var QuaEnt = "entry.1630280559";
      var IndiaEnt = "entry.1194241510";

      var checkedStrings = getCheckedStrings();
      console.log(checkedStrings);
      var dirtydata = ""
      dirtydata += OrgEnt + "=" + orgName + "&";
      dirtydata += NameEnt + "=" + pocName + "&";
      dirtydata += NumEnt + "=" + pocNumber + "&";
      dirtydata += EmailEnt + "=" + pocEmail + "&";
      dirtydata += DesEnt + "=" + designation + "&";
      dirtydata += OffEnt + "=" + officeaddress + "&";
      dirtydata += SupEnt + "=" + supplyaddress;
      dirtydata += checkedStrings + "&";
      dirtydata += ProEnt + "=" + proposal + "&";
      dirtydata += QuaEnt + "=" + maxquantity + "&";
      dirtydata += IndiaEnt + "=" + yesNo;
      console.log(dirtydata);
      var url = 'https://docs.google.com/forms/d/e/1FAIpQLSfq8T4r9krErmL8NPU1C9ke-Xgh5TYaSJkuCoAXlS4RDbzquw/formResponse'
         // var url = 'https://docs.google.com/forms/u/1/d/e/1FAIpQLSdTRnEeyANkJ7vGrIQ01fATIECr0e-aNlKqYL4JMoozsk7N3g/formResponse';
      postData(url,dirtydata)
       

    };

    function postData(url,data){

         $.ajax({
           beforeSend: function(xhrObj){
        },
                    url: url,
                    data: data,
                    type: 'POST',
                    dataType: 'text/html'
                });

    }

    function createSelectElem(arr, id){
      var $select = $("#"+id)
      arr.forEach(function(val){ 
        $select.append('<option value=\''+val+'\'>'+val+'</option>');

      }); 
    }

    function getCheckedStrings() {
      var cbs = document.getElementsByName("whatsupply");
      var answer = "";
      var element_val = "entry.442657609";
      for(var i=0; i<cbs.length; i++) {
        if(cbs[i].checked)
          answer = answer + '&'+element_val+"="+encodeURIComponent(cbs[i].value);
      }
      return answer;
    }

    function createCheckElem(arr, id){
      var $select = $("#"+id)
      arr.forEach(function(val){ 
        $select.append('<input type = "checkbox" name="whatsupply" value="' + val + '"> <span class="checkbox-label">' + val + '</span><br>');

      }); 
    }

  $( document ).ready(function() {
    createSelectElem(yesno, 'yesno');
    createCheckElem(checkboxes, 'checkfieldset');

    $('#mainForm').submit(function(e) {
      
       e.preventDefault();
      var values = $(this).serializeArray();
      console.log($(this).serialize());
      var valueDict = {};

      values.forEach(function(entry) {
        valueDict[entry.name] = entry.value;
      });
      
      console.log(valueDict);

      SubmitForm(valueDict);

    });
  });

  </script>
  <body>

    <div class="container">
      <div class="col-ld-4"></div>
      <div class="col-ld-4">
        <div class="container">
          
          <p class="lead" style="text-align:center;padding:5%"><h1 style="font-size: 3em; font-family:Oswald;color:#ED1F24;">COVID19 - Medical Kit Supplier</h1></p>

          <form id="mainForm">
            <div class="form-group">
              <label for="exampleInputEmail1">Organization Name</label>
              <input type="text" class="form-control" name="orgName"  aria-describedby="emailHelp" placeholder="e.g. XYZ Hospital" required>
             <!--small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small-->
            </div>
            <div class="form-group">
              <label for="exampleInputEmail1">Contact Person Name</label>
              <input type="text" class="form-control" name="pocName"  aria-describedby="emailHelp" placeholder="e.g. John Doe" required>
             <!--small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small-->
            </div>
            <div class="form-group">
              <label for="exampleInputEmail1">Contact Person Phone Number</label>
              <input type="text" class="form-control" pattern="^[0-9]{10}$" name="pocNumber" aria-describedby="emailHelp" placeholder="e.g. 9821372343" required>
             <!--small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small-->
            <div class="form-group">
              <label for="exampleInputEmail1">Contact Person Email</label>
              <input type="text" class="form-control" name="pocEmail"  aria-describedby="emailHelp" pattern="^(.+)@(.+)$" placeholder="e.g. john@Doe.org" required>
             <!--small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small-->
            </div>
            </div>
            <div class="form-group">
              <label for="exampleInputEmail1">Designation of the Contact Person?</label>
              <input type="text" class="form-control"  name="designation"  aria-describedby="emailHelp" placeholder="e.g. CTO" required>
             <!--small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small-->
            </div>
            <div class="form-group">
              <label for="exampleInputEmail1">Office Address</label>
              <input type="text" class="form-control" name="officeaddress"  aria-describedby="emailHelp" placeholder="e.g. Mumbai" required>
             <!--small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small-->
            </div>
            <div class="form-group">
              <label for="exampleInputEmail1">Supply Location Address</label>
              <input type="text" class="form-control" name="supplyaddress"  aria-describedby="emailHelp" placeholder="e.g. Raigad District" required>
             <!--small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small-->
            </div>
            <div class="form-group">
              <label for="checkfieldset">What All Items Can You Supply</label>
             <fieldset name="checkfieldset" id="checkfieldset">
             </fieldset>
             <!--small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small-->
            </div>
            <div class="form-group">
              <label for="exampleInputEmail1">Proposal Details to Be Shared here..</label>
              <input type="text" class="form-control" name="proposal"  aria-describedby="emailHelp" placeholder="Please enter your postal address" required>
             <!--small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small-->
            </div>
            <div class="form-group">
              <label for="exampleInputEmail1">Maximum Quantity that you can supply every week ? (Items that you have selected above)</label>
              <input type="text" class="form-control" name="maxquantity"  aria-describedby="emailHelp" placeholder="e.g. 400086" required>
             <!--small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small-->
            </div>
             <div class="form-group">
              <label for="exampleFormControlSelect1">Can You Deliver in India?</label>
              <select class="form-control" name="yesno" id="yesno"></select>
            </div>
            <button type="submit" style="text-align:center;margin-top:3%;" class="btn btn-block btn-danger btn-lg">Submit</button>
           </form>

        </div>

      </div>
      <div class="col-ld-4"></div>

    </div>
  
  </body>
</html>
